<Portfolio>

  <!--
      =======================
      Vanilla Euopean Options
      =======================      
  -->
  <Trade id="01:EquityOption:AN">
    <TradeType>EquityOption</TradeType>
    <Envelope>
      <CounterParty>CPTY</CounterParty>
      <NettingSetId>CPTY</NettingSetId>
      <AdditionalFields/>
    </Envelope>
    <EquityOptionData>
      <OptionData>
        <LongShort>Long</LongShort>
        <OptionType>Call</OptionType>
        <Style>European</Style>
        <Settlement>Cash</Settlement>
        <PayOffAtExpiry>true</PayOffAtExpiry>
        <ExerciseDates>
          <ExerciseDate>2023-11-07</ExerciseDate>
        </ExerciseDates>
      </OptionData>
      <Name>RIC:.STOXX50E</Name>
      <Currency>EUR</Currency>
      <Strike>4350</Strike>
      <StrikeCurrency>EUR</StrikeCurrency>
      <Quantity>1000</Quantity>
    </EquityOptionData>
  </Trade>

  <!-- embedded script, default engine (MC), see pricingengine.xml -->
  <Trade id="02:EquityOption">
    <TradeType>ScriptedTrade</TradeType>
    <Envelope>
      <CounterParty>CPTY</CounterParty>
      <NettingSetId>CPTY</NettingSetId>
      <AdditionalFields/>
    </Envelope>
    <ScriptedTradeData>
      <Script>
        <Code><![CDATA[
             NUMBER Payoff;
             Payoff = PutCall * (Underlying(Expiry) - Strike);
             Option = PAY( LongShort * Quantity * max( Payoff, 0 ), Expiry, Settlement, PayCcy);
        ]]></Code>
        <NPV>Option</NPV>
        <CalibrationSpec>
          <Calibration>
            <Index>Underlying</Index>
            <Strikes>
              <Strike>Strike</Strike>
            </Strikes>
          </Calibration>
        </CalibrationSpec>
      </Script>
      <Data>
        <Event>
          <Name>Expiry</Name>
          <Value>2023-11-07</Value>
        </Event>
        <Event>
          <Name>Settlement</Name>
          <Value>2023-11-07</Value>
        </Event>
        <Number>
          <Name>Strike</Name>
          <Value>4350</Value>
        </Number>
        <Number>
          <Name>PutCall</Name>
          <Value>1</Value>
        </Number>
        <Number>
          <Name>LongShort</Name>
          <Value>1</Value>
        </Number>
        <Number>
          <Name>Quantity</Name>
          <Value>1000</Value>
        </Number>
        <Currency>
          <Name>PayCcy</Name>
          <Value>EUR</Value>
        </Currency>
        <Index>
          <Name>Underlying</Name>
          <Value>EQ-RIC:.STOXX50E</Value>
        </Index>
      </Data>
    </ScriptedTradeData>
  </Trade>

  <!-- embedded script, product tag selects FD engine -->
  <Trade id="03:EquityOption:FD">
    <TradeType>ScriptedTrade</TradeType>
    <Envelope>
      <CounterParty>CPTY</CounterParty>
      <NettingSetId>CPTY</NettingSetId>
      <AdditionalFields/>
    </Envelope>
    <ScriptedTradeData>
      <ProductTag>SingleAssetOptionBwd({AssetClass})</ProductTag>
      <Script>
        <Code><![CDATA[
             NUMBER Payoff;
             Payoff = PutCall * (Underlying(Expiry) - Strike);
             Option = PAY( LongShort * Quantity * max( Payoff, 0 ), Expiry, Settlement, PayCcy);
        ]]></Code>
        <NPV>Option</NPV>
        <CalibrationSpec>
          <Calibration>
            <Index>Underlying</Index>
            <Strikes>
              <Strike>Strike</Strike>
            </Strikes>
          </Calibration>
        </CalibrationSpec>
      </Script>
      <Data>
        <Event>
          <Name>Expiry</Name>
          <Value>2023-11-07</Value>
        </Event>
        <Event>
          <Name>Settlement</Name>
          <Value>2023-11-07</Value>
        </Event>
        <Number>
          <Name>Strike</Name>
          <Value>4350</Value>
        </Number>
        <Number>
          <Name>PutCall</Name>
          <Value>1</Value>
        </Number>
        <Number>
          <Name>LongShort</Name>
          <Value>1</Value>
        </Number>
        <Number>
          <Name>Quantity</Name>
          <Value>1000</Value>
        </Number>
        <Currency>
          <Name>PayCcy</Name>
          <Value>EUR</Value>
        </Currency>
        <Index>
          <Name>Underlying</Name>
          <Value>EQ-RIC:.STOXX50E</Value>
        </Index>
      </Data>
    </ScriptedTradeData>
  </Trade>

  <!-- reference to external script, default MC engine -->
  <Trade id="04:EquityOption">
    <TradeType>ScriptedTrade</TradeType>
    <Envelope>
      <CounterParty>CPTY</CounterParty>
      <NettingSetId>CPTY</NettingSetId>
      <AdditionalFields/>
    </Envelope>
    <ScriptedTradeData>
      <ScriptName>EuropeanOption</ScriptName>
      <Data>
        <Index>
          <Name>Underlying</Name>
          <Value>EQ-RIC:.STOXX50E</Value>
        </Index>
        <Number>
          <Name>Strike</Name>
          <Value>4350</Value>
        </Number>
        <Number>
          <Name>PutCall</Name>
          <Value>1</Value>
        </Number>
        <Number>
          <Name>LongShort</Name>
          <Value>1</Value>
        </Number>
        <Currency>
          <Name>PayCcy</Name>
          <Value>EUR</Value>
        </Currency>
        <Event>
          <Name>Expiry</Name>
          <Value>2023-11-07</Value>
        </Event>
        <Event>
          <Name>Settlement</Name>
          <Value>2023-11-07</Value>
        </Event>
        <Number>
          <Name>Quantity</Name>
          <Value>1000</Value>
        </Number>
      </Data>
    </ScriptedTradeData>
  </Trade>
  
  <!-- reference to external script, compact form, default MC engine -->
  <Trade id="05:EquityOption">
    <TradeType>ScriptedTrade</TradeType>
    <Envelope>
      <CounterParty>CPTY</CounterParty>
      <NettingSetId>CPTY</NettingSetId>
      <AdditionalFields/>
    </Envelope>
    <EuropeanOptionData>
      <Underlying type="index">EQ-RIC:.STOXX50E</Underlying>
      <Strike type="number">4350</Strike>
      <PutCall type="optionType">Call</PutCall>
      <LongShort type="longShort">Long</LongShort>
      <PayCcy type="currency">EUR</PayCcy>
      <Expiry type="event">2023-11-07</Expiry>
      <Settlement type="event">2023-11-07</Settlement>
      <Quantity type="number">1000</Quantity>
    </EuropeanOptionData>
  </Trade>

  <!-- 
       ===============
       Barrier Options
       =============== 
  -->  

  <!-- Analytic pricer -->
  <Trade id="06:EquityBarrierOption:AN">
    <TradeType>EquityBarrierOption</TradeType>
    <Envelope>
      <CounterParty>CPTY</CounterParty>
      <NettingSetId>CPTY</NettingSetId>
      <AdditionalFields/>
    </Envelope>
    <EquityBarrierOptionData>
      <OptionData>
        <LongShort>Long</LongShort>
        <OptionType>Call</OptionType>
        <Style>European</Style>
        <Settlement>Cash</Settlement>
        <PayOffAtExpiry>true</PayOffAtExpiry>
        <ExerciseDates>
          <ExerciseDate>2023-11-07</ExerciseDate>
        </ExerciseDates>
      </OptionData>
      <BarrierData>
        <Type>UpAndOut</Type>
        <Style>American</Style>
        <Levels>
          <Level>5000</Level>
        </Levels>
        <Rebate>0</Rebate>
        <RebateCurrency>EUR</RebateCurrency>
        <RebatePayTime>atExpiry</RebatePayTime>
      </BarrierData>      
      <StartDate>2023-08-07</StartDate>
      <Calendar>TARGET</Calendar>
      <Name>RIC:.STOXX50E</Name>
      <Currency>EUR</Currency>
      <Strike>4350</Strike>
      <Quantity>1000</Quantity>
    </EquityBarrierOptionData>
  </Trade>  

  <!-- Scripted trade with daily observations -->
  <Trade id="07:EquityBarrierOption">
    <TradeType>ScriptedTrade</TradeType>
    <Envelope>
      <CounterParty>CPTY</CounterParty>
      <NettingSetId>CPTY</NettingSetId>
      <AdditionalFields/>
    </Envelope>
    <SingleBarrierOptionData>
      <Underlying type="index">EQ-RIC:.STOXX50E</Underlying>
      <StartDate type="event">2023-08-07</StartDate>
      <Strike type="number">4350</Strike>
      <PutCall type="optionType">Call</PutCall>
      <LongShort type="longShort">Long</LongShort>
      <PayCcy type="currency">EUR</PayCcy>
      <Expiry type="event">2023-11-07</Expiry>
      <Settlement type="event">2023-11-07</Settlement>
      <Quantity type="number">1000</Quantity>
      <!-- barrier option specifics -->
      <PayoffType type="number">0</PayoffType><!-- 0: vanilla 1: cash or nothing -->
      <Amount type="number">0</Amount><!-- only relevant for the cash or nothing payoff type -->
      <BarrierLevel type="number">5000</BarrierLevel>
      <BarrierType type="barrierType">UpOut</BarrierType>
      <BarrierRebate type="number">0</BarrierRebate>
      <BarrierRebateCurrency type="currency">EUR</BarrierRebateCurrency>
      <BarrierRebatePayTime type="number">1</BarrierRebatePayTime>
      <BarrierMonitoringDates type="event">
        <ScheduleData>
          <Rules>
            <StartDate>2023-08-07</StartDate>
            <EndDate>2023-11-07</EndDate>
            <Tenor>1D</Tenor>
            <Calendar>TARGET</Calendar>
            <Convention>F</Convention>
            <TermConvention>F</TermConvention>
            <Rule>Forward</Rule>
            <EndOfMonth/>
            <FirstDate/>
            <LastDate/>
          </Rules>
        </ScheduleData>
      </BarrierMonitoringDates>       
    </SingleBarrierOptionData>
  </Trade>

  <!-- Scripted trade with continuous barrier observation between schedule dates -->
  <Trade id="08:EquityBarrierOption">
    <TradeType>ScriptedTrade</TradeType>
    <Envelope>
      <CounterParty>CPTY</CounterParty>
      <NettingSetId>CPTY</NettingSetId>
      <AdditionalFields/>
    </Envelope>
    <SingleContinuousBarrierOptionData>
      <Underlying type="index">EQ-RIC:.STOXX50E</Underlying>
      <StartDate type="event">2023-08-07</StartDate>
      <Strike type="number">4350</Strike>
      <PutCall type="optionType">Call</PutCall>
      <LongShort type="longShort">Long</LongShort>
      <PayCcy type="currency">EUR</PayCcy>
      <Expiry type="event">2023-11-07</Expiry>
      <Settlement type="event">2023-11-07</Settlement>
      <Quantity type="number">1000</Quantity>
      <!-- barrier option specifics -->
      <PayoffType type="number">0</PayoffType><!-- 0: vanilla 1: cash or nothing -->
      <Amount type="number">0</Amount><!-- only relevant for the cash or nothing payoff type -->
      <BarrierLevel type="number">5000</BarrierLevel>
      <BarrierType type="barrierType">UpOut</BarrierType>
      <BarrierRebate type="number">0</BarrierRebate>
      <BarrierRebateCurrency type="currency">EUR</BarrierRebateCurrency>
      <BarrierRebatePayTime type="number">1</BarrierRebatePayTime>
      <BarrierMonitoringDates type="event">
        <ScheduleData>
          <Rules>
            <StartDate>2023-08-07</StartDate>
            <EndDate>2023-11-07</EndDate>
            <Tenor>1D</Tenor>
            <Calendar>TARGET</Calendar>
            <Convention>F</Convention>
            <TermConvention>F</TermConvention>
            <Rule>Forward</Rule>
            <EndOfMonth/>
            <FirstDate/>
            <LastDate/>
          </Rules>
        </ScheduleData>
      </BarrierMonitoringDates>       
    </SingleContinuousBarrierOptionData>
  </Trade>

  <!-- 
       ===========
       Accumulator
       =========== 
  -->  
  <Trade id="09:EquityAccumulator">
    <TradeType>ScriptedTrade</TradeType>
    <Envelope>
      <CounterParty>CPTY</CounterParty>
      <NettingSetId>CPTY</NettingSetId>
      <AdditionalFields/>
    </Envelope>
    <AccumulatorData>
      <Strike type="number">4400</Strike>
      <FixingAmount type="number">100</FixingAmount>
      <LongShort type="longShort">Long</LongShort>
      <Underlying type="index">EQ-RIC:.STOXX50E</Underlying>
      <PayCcy type="currency">EUR</PayCcy>
      <StartDate type="event">2023-08-09</StartDate>
      <FixingDates type="event">
        <ScheduleData>
          <Dates>
            <Dates>
              <Date>2024-08-09</Date>
              <Date>2025-08-09</Date>
              <Date>2026-08-09</Date>
              <Date>2027-08-09</Date>
              <Date>2028-08-09</Date>
            </Dates>
          </Dates>
        </ScheduleData>
      </FixingDates>
      <SettlementDates type="event">
        <DerivedSchedule>
          <BaseSchedule>FixingDates</BaseSchedule>
          <Shift>0D</Shift>
          <Calendar>NullCalendar</Calendar>
          <Convention>U</Convention>
        </DerivedSchedule>
      </SettlementDates>
      <RangeUpperBounds type="number">
        <Value>4000</Value>
        <Value>10000</Value>
      </RangeUpperBounds>
      <RangeLowerBounds type="number">
        <Value>0</Value>
        <Value>4000</Value>
      </RangeLowerBounds>
      <RangeLeverages type="number">
        <Value>1</Value>
        <Value>2</Value>
      </RangeLeverages>
      <KnockOutLevel type="number">5000</KnockOutLevel>
      <KnockOutType type="barrierType">UpOut</KnockOutType>
      <AmericanKO type="bool">false</AmericanKO>
      <GuaranteedFixings type="number">2</GuaranteedFixings>
    </AccumulatorData>
  </Trade>

</Portfolio>
