\subsubsection{Option Data}
\label{ss:option_data} 
This trade component node is used within the \lstinline!SwaptionData! and \lstinline!FXOptionData! trade data
containers. It contains the \lstinline!ExerciseDates! sub-node which includes \lstinline!ExerciseDate! child
elements. An example structure of the \lstinline!OptionData! trade component node is shown in Listing
\ref{lst:option_data}.

\begin{listing}[H]
%\hrule\medskip
\begin{minted}[fontsize=\footnotesize]{xml}
            <OptionData>
                <LongShort>Long</LongShort>
                <OptionType>Call</OptionType>
                <Style>Bermudan</Style>
                <NoticePeriod>5D</NoticePeriod>
                <NoticeCalendar>TARGET</NoticeCalendar>
                <NoticeConvention>F</NoticePeriod>
                <Settlement>Cash</Settlement>
                <SettlementMethod>CollateralizedCashPrice</SettlementMethod>
                <PayOffAtExpiry>true</PayOffAtExpiry>
                <ExerciseFees>
                    <ExerciseFee type="Percentage">0.0020</ExerciseFee>
                    <ExerciseFee type="Absolute" startDate="2017-04-20">25000</ExerciseFee>
                </ExerciseFees>
                <ExerciseFeeSettlementPeriod>2D</ExerciseFeeSettlementPeriod>
                <ExerciseFeeSettlementConvention>F</ExerciseFeeSettlementConvention>
                <ExerciseFeeSettlementCalendar>TARGET</ExerciseFeeSettlementCalendar>
                <ExerciseDates>
                    <ExerciseDate>2016-04-20</ExerciseDate>
                    <ExerciseDate>2017-04-20</ExerciseDate>
                </ExerciseDates>
            </OptionData>
\end{minted}
\caption{Option data}
\label{lst:option_data}
\end{listing}

The meanings and allowable values of the elements in the \lstinline!OptionData! node follow below.

\begin{itemize}
\item LongShort: Specifies whether the option position is \emph{long}  or \emph{short}.  Note that for Swaptions and Callable Swaps, setting \lstinline!LongShort! to \emph{short} makes the \lstinline!Payer! indicator on the underlying swap to be set from the perspective of the Counterparty. 

Allowable values: \emph{Long, L} or \emph{Short, S}

\item OptionType: Specifies whether it is a call or a put option. Optional for trade types Swaption and CallableSwap.

Allowable values: \emph{Call} or \emph{Put} 

The meaning of Call and Put values depend on the asset class of the option, see Table \ref{tab:callput_specs}.

\begin{table}[H]
\centering
\begin{tabu} to 0.9\linewidth {| X[-1.5,l,m] | X[-5,l,m] |}
    \hline
      \bfseries{Asset Class and Trade Type}  & \bfseries{Call / Put Specifications} \\  \hline
Equity/ Commodity Option & \emph{Call}: The right to buy the underlying equity/commodity at the strike price.
\newline \emph{Put}: The right to sell the underlying equity/commodity at the strike price. \\  \hline
 IR Swaption, CallableSwap, Commodity Swaption&  \emph{Call/Put} values are ignored, and the OptionType field is optional. Payer/Receiver swaption is determined in the Leg Data nodes of the underlying swap. \\ \hline
FX Options &  \emph{Call}: Bought and Sold currencies/amounts stay as determined in the trade data node. 
\newline \emph{Put}: Bought and Sold currencies/amounts are switched compared to the trade data node.  \\ \hline
  \end{tabu}
  \caption{Specification of Option Type Call / Put}
  \label{tab:callput_specs}
\end{table}


\item Style: The exercise style of the option. 

  Allowable values: \emph{European} or \emph{American} or \emph{Bermudan}. Note that trade types IR Swaption and CallableSwap can have style
  \emph{European} or \emph{Bermudan}, but not \emph{American}.  FX and Equity options trade can have styles \emph{European}
  or \emph{American}, but not \emph{Bermudan}. Commodity Option, Commodity Swaption and Commodity Average Price Option must have style  \emph{European}. 

\item NoticePeriod [Optional]: The notice period defining the date (relative to the exercise date) on which the exercise
  decision has to be taken. If not given the notice period defaults to 0D, i.e. the notice date is identical to the
  exercise date. Only supported for Swaptions and Callable Swaps currently.

\item NoticeCalendar [Optional]: The calendar used to compute the notice date from the exercise date. If not given
  defaults to the null calendar (no holidays, weekends are no holidays either).

\item NoticeConvention [Optional]: The convention used to compute the notice date from the exercise date. Defaults to
  Unadjusted if not given.

\item Settlement: Delivery type. 

  Allowable values: \emph{Cash} or \emph{Physical}

\item SettlementMethod [Optional]: Specifies the method to calculate the settlement amount for swaptions.

  Allowable values: \emph{PhysicalOTC}, \emph{PhysicalCleared}, \emph{CollateralizedCashPrice},\\ \emph{ParYieldCurve}. 
  
  Defaults to \emph{ParYieldCurve} if Settlement is \emph{Cash} and defaults to \emph{PhysicalOTC} if Settlement is \emph{Physical}.

\emph{PhysicalOTC} = OTC traded swaptions with physical settlement\\
\emph{PhysicalCleared} = Cleared swaptions with physical settlement\\
\emph{CollateralizedCashPrice} = Cash settled swaptions with settlement price calculation using zero coupon curve discounting \\
\emph{ParYieldCurve}  = Cash settled swaptions with settlement price calculation using par yield discounting \footnote{https://www.isda.org/book/2006-isda-definitions/} \footnote{https://www.isda.org/a/TlAEE/Supplement-No-58-to-ISDA-2006-Definitions.pdf} \\

\item PayOffAtExpiry [Optional]: Relevant for options with early
  exercise, i.e. the exercise occurs before expiry; \emph{true}
  indicates payoff at expiry, whereas \emph{false}  indicates payoff
  at exercise. Defaults to \emph{true}  if left blank or omitted. 

Allowable values: \emph{true}, \emph{false} Note that for FxTouchOption, only \emph{true} (payoff at expiry) is supported.
%TBC: Do not see payoffatexpiry used in either fxoption or swaption build() functions, to be logged as a bug.       

\item ExerciseFees [Optional]: This node contains child elements of tpye ExerciseFee. Similar to a list of notionals
  (see \ref{ss:leg_data}) the fees can be given either

  \begin{itemize}
  \item as a list where each entry corresponds to an exercise date and the last entry is used for all remaining exercise
    dates if there are more exercise dates than exercise fee entries, or
  \item using the \verb+startDate+ attribute to specify a change in a fee from a certain day on (w.r.t. the exercise
    date schedule)
  \end{itemize}

  Fees can either be given as an absolute amount or relative to the current notional of the period immediately following
  the exercise date using the \verb+type+ attribute together with specifiers \verb+Absolute+ resp. \verb+Percentage+. If
  not given, the type defaults to \verb+Absolute+.

  If a fee is given as a positive number the option holder has to pay a corresponding amount if they exercise the
  option. If the fee is negative on the other hand, the option holder receives an amount on the option exercise.

  Only supported for Swaptions and Callable Swaps currently.

\item ExerciseFeeSettlementPeriod [Optional]: The settlement lag for exercise fee payments. Defaults to 0D if not
  given. This lag is relative to the exercise date (as opposed to the notice date).

\item ExerciseFeeSettlementCalendar [Optional]: The calendar used to compute the exercise fee settlement date from the
  exercise date. If not given defaults to the null calendar (no holidays, weekends are no holidays either).

\item ExerciseFeeSettlementConvention [Optional]: The convention used to compute the exercise fee settlement date from
  the exercise date. Defaults to Unadjusted if not given.

\item ExerciseDates: This node contains child elements of type
  \lstinline!ExerciseDate!.  Options of style \emph{European} or
  \emph{American} require a single exercise date expressed by one
  single \lstinline!ExerciseDate! child element.  \emph{Bermudan}
  style options must have two or more \lstinline!ExerciseDate! child
  elements.

\item PremiumAmount [Optional]: Option premium amount paid by the option buyer to the option seller.

Allowable values:  Any positive real number.

\item PremiumCurrency [Optional]: Currency of the option premium.

Allowable values:  See \lstinline!Currency! in Table \ref{tab:allow_stand_data}.

\item PremiumPayDate [Optional]: Date of the option premium payment.

Allowable values:  See \lstinline!Date! in Table \ref{tab:allow_stand_data}.

\end{itemize}

